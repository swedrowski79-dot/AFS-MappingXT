# Environment Configuration for AFS-MappingXT
# Copy this file to .env and adjust values as needed
#
# All configuration values can be set via environment variables.
# This provides a unified approach to configuration management.

# ============================================================================
# Docker/Web Server Configuration
# ============================================================================

# HTTP Port for Apache
HTTP_PORT=8080

# Adminer Port (optional database management tool)
ADMINER_PORT=8081

# ============================================================================
# PHP Configuration
# These values are used by the Docker entrypoint to configure PHP
# ============================================================================

# PHP Memory Limit (e.g., 256M, 512M, 1G)
PHP_MEMORY_LIMIT=256M

# PHP Maximum Execution Time in seconds (for long-running sync operations)
PHP_MAX_EXECUTION_TIME=300

# Timezone for PHP and system
TZ=Europe/Berlin

# ============================================================================
# OPcache Configuration (PHP Bytecode Cache)
# ============================================================================

# OPcache memory for compiled scripts (in MB)
# Recommended: 128-256MB for small apps, 256-512MB for medium apps
OPCACHE_MEMORY_CONSUMPTION=256

# Memory for interned strings (in MB)
# Recommended: 16-32MB for typical applications
OPCACHE_INTERNED_STRINGS_BUFFER=16

# Maximum number of files that can be cached
# Should be higher than actual PHP file count in project
OPCACHE_MAX_ACCELERATED_FILES=10000

# File timestamp revalidation frequency (in seconds)
# Production: 60-300 (check rarely), Development: 0-2 (check often)
OPCACHE_REVALIDATE_FREQ=60

# Validate file timestamps on every request (0=off, 1=on)
# Production: 0 (use revalidate_freq), Development: 1 (always check)
OPCACHE_VALIDATE_TIMESTAMPS=0

# Enable huge code pages for better performance (0=off, 1=on)
# Only works on Linux with transparent huge pages enabled
# Can improve performance by 5-10% when available
OPCACHE_HUGE_CODE_PAGES=0

# ============================================================================
# JIT (Just-In-Time) Compilation Configuration (PHP 8.0+)
# ============================================================================

# JIT Mode - How JIT compiles hot code
# Options: "disable", "tracing" (recommended), "function", or numeric (e.g., 1254)
# - "tracing" (1255): Best for web apps, traces execution paths
# - "function" (1205): Good for CPU-intensive apps
# - "disable" (0): Turn off JIT completely
OPCACHE_JIT_MODE=tracing

# JIT Buffer Size - Memory for JIT compiled native code
# Recommended: 64-128MB for typical apps, 128-256MB for complex apps
# Set to 0 to disable JIT (also disables with JIT_MODE=disable)
OPCACHE_JIT_BUFFER_SIZE=128M

# ============================================================================
# MSSQL Database Connection
# Connection details for the AFS-ERP MSSQL database
# ============================================================================

AFS_MSSQL_HOST=10.0.1.82
AFS_MSSQL_PORT=1435
AFS_MSSQL_DB=AFS_WAWI_DB
AFS_MSSQL_USER=sa
AFS_MSSQL_PASS=W3laf!x

# ============================================================================
# Application Configuration
# These values control the behavior of the AFS-MappingXT application
# ============================================================================

# Media Source Directory (for images and documents)
# This should point to the network share or directory containing media files
AFS_MEDIA_SOURCE=/var/www/data

# Metadata Directories (optional)
# Directories containing additional metadata for articles and categories
# Leave empty if not used (empty = not configured)
AFS_METADATA_ARTICLES=
AFS_METADATA_CATEGORIES=

# Maximum Error Log Entries (before rotation)
AFS_MAX_ERRORS=200

# Log Rotation (days to keep log files)
AFS_LOG_ROTATION_DAYS=30

# Mapping Version (for change tracking in logs)
AFS_MAPPING_VERSION=1.0.0

# Enable File Logging (JSON logs to files)
AFS_ENABLE_FILE_LOGGING=true

# Log Level (Minimum level to log: 'info', 'warning', 'error')
# Use 'warning' for lean logging (recommended), 'info' for verbose, 'error' for critical only
AFS_LOG_LEVEL=warning

# Log Sample Size (Number of items in error/warning sample arrays)
# Use smaller values (e.g., 5) for lean logging
AFS_LOG_SAMPLE_SIZE=5
